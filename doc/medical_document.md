# 医師記録等

更新日:2021/12/28
## 趣旨
本事業では、各社のSS-MIX2モジュールの拡張ストレージへの出力機能を利用し、以下の情報を出力することを求めている。その際、SS-MIX2 拡張ストレージ構成の説明と構築ガイドライン Ver.1.2g（以下、ガイドライン）に記載している仕様に対応していること。また、トランザクションストレージ、インデックスデータベースも同時に生成すること。
=======

* 経過記録
* 退院時サマリー
* 診療情報提供書
* 災害時JSPEED記録

以下に仕様を示す。

## ドキュメントデータ

### 拡張ストレージ 物理構造

```
    |-- 拡張ストレージ ルートフォルダ
        |-- 患者ID 先頭3文字
            |-- 患者ID 4～6文字
                |-- 患者ID
                    |-- 診療日
                        |-- データ種別
                            |-- コンテンツフォルダ
                                |--主文書ファイル
```

### トランザクションストレージ

経過記録、退院時サマリー、診療情報提供書は単一のトランザクションファイル内に混在してもよい。災害時JSPEED記録が出力されるトランザクションファイルには、災害時JSPEED記録だけが存在すること。

## 診療日

特に指定しない。

## データ種別

ガイドライン P4 (4)「データ種別フォルダ」について に則ること。

```
[ローカル文書コード]^ローカル文書名称^[ローカルコード体系コード]^標準文書コード^標準文書名称^標準コード体系コード
```

以下のように標準コードに対しローカルコードが複数あることは許容される。

```
L12345^入院診療録^99ZZZ^11506-3^経過記録^LN
L12346^外来診療録^99ZZZ^11506-3^経過記録^LN
```

|No|データ種別|種別名称|HL7メッセージ型|
|---|---|---|---|
|2|^（ローカル名称）^^11506-3^経過記録^LN|診療録（外来/入院含む）|HL7 CDA R2|
|2.1|^（ローカル名称）^^34108-1^外来診療録^LN|診療録（外来）（入院・外来が別の場合）|HL7 CDA R2|
|2.2|^（ローカル名称）^^34112-3^入院診療録^LN|診療録（入院）（入院・外来が別の場合）|HL7 CDA R2|
|3|^（ローカル名称）^^18842-5^退院時サマリー^LN|退院時サマリー|HL7 CDA R2|
|4|^（ローカル名称）^^57133-1^紹介状^LN|診療情報提供書|HL7 CDA R2|
|5|L-JSPEED^災害時JSPEED記録^99ZL01^74465-6^災害時JSPEED記録^LN|災害時JSPEED記録|HL7 CDA R2|

## コンテンツフォルダ

ガイドライン Ver.1.2g P5 (5)「コンテンツフォルダ」について に則ること。
=======

```
患者ID_診療日_データ種別コード_特定キー_発生日時_診療科コード_コンディションフラグ
```

いずれの文書も削除は想定していないが、電子カルテシステムによっては修正はあり得ると考える。その場合、ガイドライン P6 ④修正が発生する場合 に則り改版すること。

## 主文書ファイル

XML CDA R2で出力すること。XMLファイル以外に画像ファイルやCSSファイル等を出力してもかまわない。

### HEADER部

いずれの文書もJAHIS　診療文書構造化記述規約 共通編 Ver.1.0に則ること。

P27 6.3.11.検査・診療等行為 "documentationOf/ServiceEvent" によると、documentationOfの制約・多重度は0..1となっているが、
経過記録、退院時サマリ、災害時JSPEED記録についてはこれを1..1と読み替えること。

経過記録、災害時JSPEED記録はserviceEvent classCode(サービスイベントクラスコード)をENC(診察)とし、effectiveTime(実施日)はlow value、high valueともに記録タイミングを出力すること。

退院時サマリはserviceEvent classCode(サービスイベントクラスコード)をACCM(入院、滞在)とし、effectiveTime(実施日)はlow valueに入院タイミング、high valueに退院タイミングを出力すること。

タイミングの粒度は日以上であれば良い。

#### /ClinicalDocument/codeの属性値

/ClinicalDocument/codeの属性値はデータ種別に対応する値を出力すること。

* 経過記録

外来・入院含む

```
<code code="11506-3" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="経過記録"/>
```

外来・入院が別の場合

```
<code code="34108-1" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="外来診療録"/>
```

```
<code code="34112-3" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="入院診療録"/>
```

* 退院時サマリー

```
<code code="18842-5" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="退院時サマリー"/>
```

* 診療情報提供書

```
<code code="MD0020730" codeSystem="1.2.392.200119.5.3.1" codeSystemName="JMIX" displayName="診療情報提供書"/>
```

* 災害時JSPEED記録

```
<code code="74465-6" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="災害時JSPEED記録"/>
```

### BODY部

#### 診療情報提供書

診療情報提供書は、日本HL7協会 診療情報提供書規格（医療機関への紹介状）Ver1.00に則ること。

#### 災害時JSPEED記録

* 概要

JSPEED情報については、Additional Documentセクションに記載するものとする。また、textタグ内に情報を順に1行にカンマ区切りで書き出すものとする。

* 説明ブロック仕様

表 Additional Document 説明ブロックXML 仕様

|XPath| Card.| 値 |説明|
|---|---|---|---|
|section|||[/ClinicalDocument/component/structuredBody/component/section]|
|templateId |1..1|
| @root| R |2.16.840.1.113883.10.20.35.2.1|
|code |1..1|
| @code |R| 77599-9 |セクションコード|
| @displayName |R| ADDITIONAL DOCUMENTATION|セクションコードを示す文字列|
| @codeSystem |R| 2.16.840.1.113883.6.1| セクションコードのコード体系を示すOID|
| @codeSystemName |O| LOINC| セクションコードのコード体系を示す文字列|
|title|0..1|
| text() |M| Jspeed DOCUMENTATION|セクションのタイトル記載文字列固定値ではないが、記載している文字列「Jspeed DOCUMENTATION」を推奨する|
|text |1..1|
| text()| M| |セクションのテキスト記載文字列.以下の情報を順に1行にカンマ区切りで書き出すものとする。なお、最終フィールドのバージョン情報以外は非必須である。また数値以外のデータは””で囲むこと|

表 text内データ記述仕様

|項番|項目|値|例|
|-|-|-|-|
|a|医療機関名称（災害医療チーム派遣元医療機関・組織）|文字列|"医療機関名"|
|b|災害医療チーム名称|文字列|""|
|c1|報告対象診療日|文字列 "yyyy/mm/dd"|"2018/01/01"|
|c2|本データ報告日時（データ作成完了時刻）|文字列 "yyyy/mm/ddhh:mm"(24h)|"2018/01/0109:01"|
|d1|今回報告の診療場所（名称）|文字列|"医療機関名"|
|d2|郵便番号|文字列 "nnn-nnnn"|"123-4567"|
|d3|施設住所|文字列|"東京都"|
|d4|Geo-tag|文字列 "[-]d.d, [-]d.d" 緯度経度WGS84|"12.3456, -98.7654"|
|e1|明日の診療場所−同一地区で継続|数値 1:該当 0:非該当||
|e2|明日の診療場所−別地区で継続|数値 1:該当 0:非該当||
|e3|明日の診療場所−終了|数値 1:該当 0:非該当||
|e4|明日の診療場所−未定|数値 1:該当 0:非該当||
|f|携帯電話番号（報告者への連絡方法）|文字列||
|g|電子メールアドレス（報告者）|文字列||
|h1|派遣元地理区分−被災地元|数値 1:該当 0:非該当||
|h2|派遣元地理区分−被災地域外・県内|数値 1:該当 0:非該当||
|h3|派遣元地理区分−被災県外|数値 1:該当 0:非該当||
|h4|派遣元地理区分−被災海外|数値 1:該当 0:非該当||
|h5|医療機関|数値 1:該当 0:非該当|1|
|i1|派遣元組織区分−DMAT|数値 1:該当 0:非該当||
|i2|派遣元組織区分−国立病院機構|数値 1:該当 0:非該当|1|
|i3|派遣元組織区分−日赤|数値 1:該当 0:非該当||
|i4|派遣元組織区分−JMAT|数値 1:該当 0:非該当||
|i5|派遣元組織区分−その他|数値 1:該当 0:非該当||
|i5t|派遣元区分−その他（  ）|文字列||
|i6|医療機関|文字列||
|ID|ID No.|文字列 アルファベット文字と数字で構成された一意性のあるもの推奨||
|health_event|主病名|文字列||
|Age_year|年齢|数値||
|Age_moon|月齢|数値 0歳症例のみ||
|JPN+a|年齢カテゴリ(J-SPEED)|数値 1:1歳未満 2:1歳以上9歳未満 3:9歳以上75歳未満 4:75歳以上||
|MDSa|年齢カテゴリ(MDS)|数値 1:1歳未満 2:1歳以上5歳未満 3:5歳以上65歳未満 4:65歳以上||
|JPN+1|性別:男性|数値 1:該当 0:非該当||
|JPN+2|性別:女性（妊娠なし）|数値 1:該当 0:非該当||
|JPN+3|性別:女性（妊婦）|数値 1:該当 0:非該当||
|JPN+4|中等症（トリアージ黄色以上・自立歩行不能）|数値 1:該当 0:非該当||
|JPN+5|搬送必要性あり|数値 1:該当 0:非該当||
|JPN+6|今回再診|数値 1:該当 0:非該当||
|JPN+7|頭頸・脊椎の重症外傷（入院または全身麻酔下手術要）|数値 1:該当 0:非該当||
|JPN+8|体幹の重症外傷（入院または全身麻酔下手術要）|数値 1:該当 0:非該当||
|JPN+9|四肢の重症外傷（入院または全身麻酔下手術要）|数値 1:該当 0:非該当||
|JPN+10|外傷（中等症）加療に局所麻酔必要|数値 1:該当 0:非該当||
|JPN+11|外傷（軽症）加療に麻酔不要|数値 1:該当 0:非該当||
|JPN+12|創傷|数値 1:該当 0:非該当||
|JPN+13|骨折|数値 1:該当 0:非該当||
|JPN+14|熱傷|数値 1:該当 0:非該当||
|JPN+15|溺水|数値 1:該当 0:非該当||
|JPN+16|クラッシュ症候群|数値 1:該当 0:非該当||
|JPN+17|人工透析ニーズ|数値 1:該当 0:非該当||
|JPN+28|外傷以外の緊急の外科的医療ニーズ|数値 1:該当 0:非該当||
|JPN+29|感染症以外の緊急の内科的医療ニーズ|数値 1:該当 0:非該当||
|JPN+18|発熱|数値 1:該当 0:非該当||
|JPN+19|急性呼吸器感染症|数値 1:該当 0:非該当||
|JPN+20|消化器感染症、食中毒|数値 1:該当 0:非該当||
|JPN+21|麻疹疑い|数値 1:該当 0:非該当||
|JPN+22|破傷風疑い|数値 1:該当 0:非該当||
|JPN+23|急性血性下痢症|数値 1:該当 0:非該当||
|JPN+24|急性黄疸症候群|数値 1:該当 0:非該当||
|JPN+25|髄膜炎疑い|数値 1:該当 0:非該当||
|JPN+26|急性弛緩性麻痺|数値 1:該当 0:非該当||
|JPN+27|急性出血熱|数値 1:該当 0:非該当||
|JPN+30|深部静脈血栓症/肺・脳・冠動脈塞栓症疑い|数値 1:該当 0:非該当||
|JPN+31|高血圧症|数値 1:該当 0:非該当||
|JPN+32|気管支喘息発作|数値 1:該当 0:非該当||
|JPN+33|産科疾患|数値 1:該当 0:非該当||
|JPN+34|皮膚疾患（外傷・熱傷以外）|数値 1:該当 0:非該当||
|JPN+35|災害ストレス関連諸症状|数値 1:該当 0:非該当||
|JPN+36|緊急のメンタル・ケアニーズ|数値 1:該当 0:非該当||
|JPN+37|緊急の栄養支援ニーズ|数値 1:該当 0:非該当||
|JPN+38|緊急の介護/看護ケアニーズ|数値 1:該当 0:非該当||
|JPN+39|緊急の飲料水・食料支援ニーズ|数値 1:該当 0:非該当||
|JPN+40|治療中断|数値 1:該当 0:非該当||
|JPN+41|高侵襲処置（全身麻酔または入院が必要な処置）|数値 1:該当 0:非該当||
|JPN+42|低侵襲外科処置（全身麻酔・入院ともに不要な処置）|数値 1:該当 0:非該当||
|JPN+43|四肢切断（指切断を除く）|数値 1:該当 0:非該当||
|JPN+44|正常経腟分娩|数値 1:該当 0:非該当||
|JPN+45|帝王切開|数値 1:該当 0:非該当||
|JPN+46|その他の産科処置|数値 1:該当 0:非該当||
|JPN+47|再診の必要性あり|数値 1:該当 0:非該当||
|JPN+48|入院（自施設）|数値 1:該当 0:非該当||
|JPN+49|紹介|数値 1:該当 0:非該当||
|JPN+50|診療継続拒否|数値 1:該当 0:非該当||
|JPN+51|受診時死亡|数値 1:該当 0:非該当||
|JPN+52|加療中の死亡|数値 1:該当 0:非該当||
|JPN+53|長期リハビリテーションの必要性|数値 1:該当 0:非該当||
|JPN+54|直接的関連あり（災害による外傷等）|数値 1:該当 0:非該当||
|JPN+55|間接的（災害に伴う環境変化による健康障害）|数値 1:該当 0:非該当||
|JPN+56|関連なし（悪性腫瘍・生活習慣病等）|数値 1:該当 0:非該当||
|JPN+57|社会的保護を要する小児(孤児等)|数値 1:該当 0:非該当||
|JPN+58|社会的保護を要する成人高齢者（要介護者等）|数値 1:該当 0:非該当||
|JPN+59|性暴力|数値 1:該当 0:非該当||
|JPN+60|暴力 (性暴力以外)|数値 1:該当 0:非該当||
|JPN+61|(Added Item 1)|数値 1:該当 0:非該当||
|JPN+62|(Added Item 2)|数値 1:該当 0:非該当||
|JPN+63|(Added Item 3)|数値 1:該当 0:非該当||
|JPN+64|(Added Item 4)|数値 1:該当 0:非該当||
|JPN+65|(Added Item 5)|数値 1:該当 0:非該当||
|JPN+66|(Added Item 6)|数値 1:該当 0:非該当||
|Ver|Version|文字列 "JPN+1.00"固定|"JPN+1.00"|

* XMLサンプル

```
<section>
 <templateId root="2.16.840.1.113883.10.20.35.2.1" />
 <code code="77599-9" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="ADDITIONAL DOCUMENTATION" />
 <title>Jspeed DOCUMENTATION</title>
 <text>"医療機関名","","2018/01/01","2018/01/0109:01","医療機関名","123-4567","東京都",,,,,,,,,,,,1,,,,,,,"ID1",,45,,3,3,1,0,0,0,0,0,0,1,0,....,"JPN+1.00"</text>
</section>
```

* 性別、妊娠の組み合わせ

||JPN+1|JPN+2|JPN+3|
|-|-|-|-|
|不明|0|0|0|
|男性|1|0|0|
|女性（妊娠なし）|0|1|0|
|女性（妊婦）|0|0|1|

上記の組み合わせ以外は許容されない。

#### その他の文書

その他の文書は、XMLの文法に則ること。
