# 医師記録等
更新日:2017/03/10
## 趣旨
本事業では、各社のSS-MIX2モジュールの拡張ストレージへの出力機能を利用し、以下の情報を出力することを求めている。その際、SS-MIX2 拡張ストレージ構成の説明と構築ガイドライン Ver.1.2d（以下、ガイドライン）に記載している仕様に対応していること。また、トランザクションストレージ、インデックスデータベースも同時に生成すること。

* 経過記録
* 退院時サマリー
* 診療情報提供書

以下に仕様を示す。

## ドキュメントデータ 物理構造
    |-- 拡張ストレージ ルートフォルダ
        |-- 患者ID 先頭3文字
            |-- 患者ID 4～6文字
                |-- 患者ID
                    |-- 診療日
                        |-- データ種別
                            |-- コンテンツフォルダ
                                |--主文書ファイル


## 診療日
特に指定しない。

## データ種別
ガイドライン P4 (4)「データ種別フォルダ」について に則ること。
```
[ローカル文書コード]^ローカル文書名称^[ローカルコード体系コード]^標準文書コード^標準文書名称^標準コード体系コード
```
以下のように標準コードに対しローカルコードが複数あることは許容される。
```
L12345^入院診療録^99ZZZ^11506-3^経過記録^LN
L12346^外来診療録^99ZZZ^11506-3^経過記録^LN
```

## コンテンツフォルダ
ガイドライン Ver.1.2d P5 (5)「コンテンツフォルダ」について に則ること。
```
患者ID_診療日_データ種別コード_特定キー_発生日時_診療科コード_コンディションフラグ
```
いずれの文書も削除は想定していないが、電子カルテシステムによっては修正はあり得ると考える。その場合、ガイドライン P6 ④修正が発生する場合 に則り改版すること。


## 主文書ファイル
XML CDA R2で出力すること。XMLファイル以外に画像ファイルやCSSファイル等を出力してもかまわない。

### HEADER部
いずれの文書もJAHIS　診療文書構造化記述規約 共通編 Ver.1.0に則ること。  
P27 6.3.11.検査・診療等行為 "documentationOf/ServiceEvent" によると、documentationOfの制約・多重度は0..1となっているが、
経過記録、退院時サマリについてはこれを1..1と読み替えること。  
経過記録はserviceEvent classCode(サービスイベントクラスコード)をENC(診察)とし、effectiveTime(実施日)はlow value、high valueともに記録タイミングを出力すること。  
退院時サマリはserviceEvent classCode(サービスイベントクラスコード)をACCM(入院、滞在)とし、effectiveTime(実施日)はlow valueに入院タイミング、high valueに退院タイミングを出力すること。  
タイミングの粒度は日以上であれば良い。

### BODY部
診療情報提供書は、日本HL7協会 患者診療情報提供書 規格Ver.1.00に則ること。  
診療情報提供書以外は、XMLの文法に則ること。